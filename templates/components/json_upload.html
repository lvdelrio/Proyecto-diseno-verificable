{% macro json_upload_button(upload_url, button_text="Subir JSON") %}
{% set component_id = upload_url|replace('.', '_') %}
<div class="relative json-upload-component" data-upload-url="{{ url_for(upload_url) }}" data-component-id="{{ component_id }}">
    <button id="jsonUploadBtn_{{ component_id }}" class="json-upload-trigger bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center">
        <i class="fas fa-file-import mr-2"></i> {{ button_text }}
    </button>
    <div id="jsonUploadDropdown_{{ component_id }}" class="json-upload-dropdown hidden absolute right-0 mt-2 w-64 bg-white rounded-md shadow-lg z-50 p-3 border border-gray-200">
        <form id="bulkUploadForm_{{ component_id }}" class="json-upload-form" enctype="multipart/form-data">
            <div class="mb-3">
                <label class="block text-sm font-medium text-gray-700 mb-1">Seleccionar archivo:</label>
                <input type="file" id="jsonFile_{{ component_id }}" name="jsonFile" accept=".json" 
                    class="json-file-input block w-full text-sm text-gray-500
                            file:mr-2 file:py-1 file:px-3
                            file:rounded-md file:border-0
                            file:text-sm file:font-semibold
                            file:bg-blue-50 file:text-blue-700
                            hover:file:bg-blue-100" required>
            </div>
            <div class="flex justify-end">
                <button type="button" id="cancelBtn_{{ component_id }}" class="json-upload-cancel mr-2 px-3 py-1 text-sm text-gray-700 hover:bg-gray-100 rounded">
                    Cancelar
                </button>
                <button type="submit" class="px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700">
                    <i class="fas fa-upload mr-1"></i> Enviar
                </button>
            </div>
        </form>
    </div>
</div>
{% endmacro %}